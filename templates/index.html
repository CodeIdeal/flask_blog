{% extends "layout.html" %}
{% block title %}
    Cabana-Home
{% endblock %}

{% block small_title %}
    Home
{% endblock %}

{% block content %}
    <ul>
    {% for post in posts %}
        <li class="post">
            <p class="post_title"><a href={{ url_for('post', post_id=post.post_id) }}>{{ post.title }}</a></p>
            <p class="post_info"><span><i style="font-size: .9em"; class="layui-icon">&#xe60e;</i> {{ post.date }}</span> <span><i style="font-size: .9em"; class="layui-icon">&#xe627;</i> {{ post.tags }}</span></p>
            <p class="subtitle">{{ post.subtitle }}</p>
        </li>
        <hr>
    {% endfor %}
    </ul>

    <div id="page_number"/>

    <div class="mdui-text-center" style="margin-top: 1.5em">
        {% if pages > 5 %}
            {% if cur_page <= 3 %}
                {% for i in range(4) %}
                    {% if cur_page == (i + 1) %}
                        {{ i + 1 }}
                    {% else %}
                        <a href={{ url_for('page', page_index=i + 1) }}>{{ i + 1 }}</a>
                    {% endif %}

                {% endfor %}
                ...
                <a href={{ url_for('page', page_index=pages) }}>{{ pages }}</a>
            {% elif cur_page >3 and cur_page <= pages-3 %}
                <a href={{ url_for('page', page_index=1) }}>{{ 1 }}</a>
                ...
                <a href={{ url_for('page', page_index=cur_page - 1) }}>{{ cur_page - 1 }}</a>
                {{ cur_page }}
                <a href={{ url_for('page', page_index=cur_page + 1) }}>{{ cur_page + 1 }}</a>
                ...
                <a href={{ url_for('page', page_index=pages) }}>{{ pages }}</a>
            {% else %}
                <a href={{ url_for('page', page_index=1) }}>{{ 1 }}</a>
                ...
                {% for i in range(4) %}
                    {% if cur_page == pages - (3 - i) %}
                        {{ pages - (3 - i) }}
                    {% else %}
                        <a href={{ url_for('page', page_index=pages - (3 - i)) }}>{{ pages - (3 - i)}}</a>
                    {% endif %}

                {% endfor %}
            {% endif %}
        {% else %}
            {% for i in range(pages) %}
                <a href={{ url_for('page', page_index=i + 1) }}>{{ i + 1 }}</a>
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}